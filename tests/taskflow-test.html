<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TaskFlow - Manual Test Sheet v1.0</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

  :root {
    --bg: #0f1117;
    --surface: #1a1d27;
    --surface-2: #222632;
    --border: #2d3248;
    --text: #e4e6ef;
    --text-dim: #8b8fa7;
    --accent: #6c5ce7;
    --accent-glow: rgba(108,92,231,0.15);
    --pass: #00b894;
    --pass-bg: rgba(0,184,148,0.1);
    --fail: #e17055;
    --fail-bg: rgba(225,112,85,0.1);
    --skip: #fdcb6e;
    --skip-bg: rgba(253,203,110,0.1);
    --pending: #636e82;
    --info: #74b9ff;
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'IBM Plex Sans Thai', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    min-height: 100vh;
  }

  /* Header */
  .header {
    background: linear-gradient(135deg, #1a1d27 0%, #22263a 100%);
    border-bottom: 1px solid var(--border);
    padding: 24px 32px;
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(20px);
  }

  .header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 16px;
  }

  .header h1 {
    font-size: 22px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }

  .header h1 span { color: var(--accent); }

  .header-meta {
    display: flex;
    gap: 20px;
    font-size: 13px;
    color: var(--text-dim);
    flex-wrap: wrap;
  }

  .header-meta code {
    font-family: 'JetBrains Mono', monospace;
    background: var(--surface-2);
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    color: var(--info);
  }

  /* Stats Bar */
  .stats-bar {
    display: flex;
    gap: 12px;
    margin-top: 16px;
    flex-wrap: wrap;
    align-items: center;
  }

  .stat-chip {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    border: 1px solid var(--border);
    background: var(--surface);
  }

  .stat-chip .dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    display: inline-block;
  }

  .stat-chip.total .dot { background: var(--accent); }
  .stat-chip.pass .dot { background: var(--pass); }
  .stat-chip.fail .dot { background: var(--fail); }
  .stat-chip.skip .dot { background: var(--skip); }
  .stat-chip.pending .dot { background: var(--pending); }

  .progress-bar-container {
    flex: 1;
    min-width: 200px;
    height: 6px;
    background: var(--surface-2);
    border-radius: 3px;
    overflow: hidden;
    display: flex;
  }

  .progress-bar-container .bar-pass { background: var(--pass); transition: width 0.4s; }
  .progress-bar-container .bar-fail { background: var(--fail); transition: width 0.4s; }
  .progress-bar-container .bar-skip { background: var(--skip); transition: width 0.4s; }

  /* Actions */
  .header-actions {
    display: flex;
    gap: 8px;
    margin-top: 12px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 7px 16px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--surface-2);
    color: var(--text);
    font-size: 13px;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.15s;
    font-weight: 500;
  }

  .btn:hover { background: var(--border); }
  .btn.primary { background: var(--accent); border-color: var(--accent); color: #fff; }
  .btn.primary:hover { opacity: 0.85; }
  .btn.danger { border-color: var(--fail); color: var(--fail); }
  .btn.danger:hover { background: var(--fail-bg); }

  /* Filter */
  .filter-row {
    display: flex;
    gap: 6px;
    margin-top: 12px;
    flex-wrap: wrap;
  }

  .filter-btn {
    padding: 5px 12px;
    border-radius: 14px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text-dim);
    font-size: 12px;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.15s;
  }

  .filter-btn:hover { border-color: var(--accent); color: var(--text); }
  .filter-btn.active { background: var(--accent-glow); border-color: var(--accent); color: var(--accent); }

  /* Main */
  .main { max-width: 1400px; margin: 0 auto; padding: 24px 32px 80px; }

  /* Test Accounts */
  .accounts-bar {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 14px 20px;
    margin-bottom: 24px;
    display: flex;
    gap: 24px;
    flex-wrap: wrap;
    font-size: 13px;
  }

  .accounts-bar strong { color: var(--info); }
  .accounts-bar code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    background: var(--surface-2);
    padding: 1px 6px;
    border-radius: 3px;
  }

  /* Section */
  .section {
    margin-bottom: 28px;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    user-select: none;
    transition: background 0.15s;
  }

  .section-header:hover { background: var(--surface-2); }

  .section-header h2 {
    font-size: 15px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .section-header h2 .num {
    background: var(--accent);
    color: #fff;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 700;
  }

  .section-stats {
    display: flex;
    gap: 12px;
    font-size: 12px;
    color: var(--text-dim);
  }

  .section-stats .s-pass { color: var(--pass); }
  .section-stats .s-fail { color: var(--fail); }

  .section-chevron {
    transition: transform 0.2s;
    color: var(--text-dim);
  }

  .section.collapsed .section-chevron { transform: rotate(-90deg); }
  .section.collapsed .section-body { display: none; }

  .section-body {
    border: 1px solid var(--border);
    border-top: none;
    border-radius: 0 0 8px 8px;
    overflow: hidden;
  }

  /* Sub-section */
  .subsection-title {
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-dim);
    background: var(--surface-2);
    border-bottom: 1px solid var(--border);
  }

  /* Table */
  .test-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  .test-table th {
    text-align: left;
    padding: 8px 12px;
    font-weight: 600;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-dim);
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
  }

  .test-table td {
    padding: 10px 12px;
    border-bottom: 1px solid rgba(45,50,72,0.5);
    vertical-align: top;
  }

  .test-table tr:hover td { background: rgba(108,92,231,0.03); }
  .test-table tr.status-pass td { background: var(--pass-bg); }
  .test-table tr.status-fail td { background: var(--fail-bg); }
  .test-table tr.status-skip td { background: var(--skip-bg); }

  .test-table .col-id { width: 70px; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: var(--text-dim); }
  .test-table .col-scenario { width: 22%; }
  .test-table .col-user { width: 70px; }
  .test-table .col-steps { width: 25%; font-size: 12px; color: var(--text-dim); }
  .test-table .col-expected { width: 22%; font-size: 12px; }
  .test-table .col-status { width: 100px; text-align: center; }
  .test-table .col-note { width: 15%; }

  /* User Badge */
  .user-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
  }

  .user-badge.member { background: rgba(116,185,255,0.15); color: var(--info); }
  .user-badge.admin { background: rgba(108,92,231,0.15); color: var(--accent); }

  /* Status Buttons */
  .status-group {
    display: flex;
    gap: 4px;
    justify-content: center;
  }

  .status-btn {
    width: 28px; height: 28px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: transparent;
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .status-btn:hover { transform: scale(1.1); }
  .status-btn.pass-btn:hover, .status-btn.pass-btn.active { background: var(--pass); border-color: var(--pass); color: #fff; }
  .status-btn.fail-btn:hover, .status-btn.fail-btn.active { background: var(--fail); border-color: var(--fail); color: #fff; }
  .status-btn.skip-btn:hover, .status-btn.skip-btn.active { background: var(--skip); border-color: var(--skip); color: #000; }

  /* Note Input */
  .note-input {
    width: 100%;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 4px;
    color: var(--text);
    font-family: inherit;
    font-size: 12px;
    padding: 4px 6px;
    resize: none;
    transition: border-color 0.15s;
    min-height: 28px;
  }

  .note-input:focus {
    outline: none;
    border-color: var(--accent);
    background: var(--surface-2);
  }

  /* Steps formatting */
  .step-list { list-style: none; counter-reset: step; }
  .step-list li { counter-increment: step; padding-left: 18px; position: relative; margin-bottom: 2px; }
  .step-list li::before {
    content: counter(step) ".";
    position: absolute;
    left: 0;
    color: var(--accent);
    font-weight: 600;
    font-size: 11px;
  }

  /* Bug Report Modal */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 200;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(4px);
  }

  .modal-overlay.show { display: flex; }

  .modal {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    width: 600px;
    max-width: 90vw;
    max-height: 85vh;
    overflow-y: auto;
    padding: 24px;
  }

  .modal h3 { font-size: 17px; margin-bottom: 16px; }

  .modal-field { margin-bottom: 12px; }
  .modal-field label { display: block; font-size: 12px; color: var(--text-dim); margin-bottom: 4px; font-weight: 600; }
  .modal-field input, .modal-field select, .modal-field textarea {
    width: 100%;
    padding: 8px 12px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text);
    font-family: inherit;
    font-size: 13px;
  }

  .modal-field textarea { min-height: 80px; resize: vertical; }
  .modal-field input:focus, .modal-field select:focus, .modal-field textarea:focus { outline: none; border-color: var(--accent); }

  .modal-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px; }

  /* Summary Table */
  .summary-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  .summary-table th, .summary-table td {
    padding: 10px 14px;
    border-bottom: 1px solid var(--border);
    text-align: left;
  }

  .summary-table th {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-dim);
    background: var(--surface);
  }

  .summary-table td.num { text-align: center; font-family: 'JetBrains Mono', monospace; }
  .summary-table tr:last-child { font-weight: 700; background: var(--surface-2); }

  /* Bug list */
  .bug-list { margin-top: 24px; }
  .bug-card {
    background: var(--surface);
    border: 1px solid var(--fail);
    border-left: 4px solid var(--fail);
    border-radius: 8px;
    padding: 14px 18px;
    margin-bottom: 10px;
    font-size: 13px;
  }

  .bug-card .bug-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }

  .bug-card .bug-id { font-family: 'JetBrains Mono', monospace; color: var(--fail); font-weight: 700; }

  .severity-tag {
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 700;
  }

  .severity-tag.critical { background: #d63031; color: #fff; }
  .severity-tag.high { background: var(--fail); color: #fff; }
  .severity-tag.medium { background: var(--skip); color: #000; }
  .severity-tag.low { background: var(--info); color: #000; }

  .bug-remove {
    background: none;
    border: none;
    color: var(--text-dim);
    cursor: pointer;
    font-size: 16px;
    padding: 2px 6px;
  }

  .bug-remove:hover { color: var(--fail); }

  /* Tester info */
  .tester-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px 20px;
    margin-bottom: 24px;
  }

  .tester-section h3 { font-size: 14px; margin-bottom: 10px; color: var(--text-dim); }

  .tester-row {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }

  .tester-row input {
    flex: 1;
    min-width: 180px;
    padding: 8px 12px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text);
    font-family: inherit;
    font-size: 13px;
  }

  .tester-row input:focus { outline: none; border-color: var(--accent); }

  /* Print */
  @media print {
    .header { position: static; }
    .btn, .header-actions, .filter-row { display: none !important; }
    .status-btn { border: 1px solid #ccc !important; }
    body { background: #fff; color: #000; }
    .test-table td, .test-table th { border: 1px solid #ddd; }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .header, .main { padding-left: 16px; padding-right: 16px; }
    .test-table { font-size: 12px; }
    .test-table .col-steps, .test-table .col-expected { display: none; }
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-top">
    <div>
      <h1>üß™ <span>TaskFlow</span> ‚Äî Manual Test Sheet</h1>
      <div class="header-meta">
        <span>Version 1.0</span>
        <span>Date: <code>2026-02-10</code></span>
        <span>UAT: <code>https://frontend-beta-seven-60.vercel.app</code></span>
      </div>
    </div>
  </div>
  <div class="stats-bar">
    <div class="stat-chip total"><span class="dot"></span> ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <span id="stat-total">68</span></div>
    <div class="stat-chip pass"><span class="dot"></span> ‡∏ú‡πà‡∏≤‡∏ô <span id="stat-pass">0</span></div>
    <div class="stat-chip fail"><span class="dot"></span> ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô <span id="stat-fail">0</span></div>
    <div class="stat-chip skip"><span class="dot"></span> ‡∏Ç‡πâ‡∏≤‡∏° <span id="stat-skip">0</span></div>
    <div class="stat-chip pending"><span class="dot"></span> ‡∏£‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö <span id="stat-pending">68</span></div>
    <div class="progress-bar-container">
      <div class="bar-pass" id="bar-pass" style="width:0"></div>
      <div class="bar-fail" id="bar-fail" style="width:0"></div>
      <div class="bar-skip" id="bar-skip" style="width:0"></div>
    </div>
  </div>
  <div class="filter-row">
    <button class="filter-btn active" onclick="filterTests('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    <button class="filter-btn" onclick="filterTests('pending')">‚¨ú ‡∏£‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
    <button class="filter-btn" onclick="filterTests('pass')">‚úÖ ‡∏ú‡πà‡∏≤‡∏ô</button>
    <button class="filter-btn" onclick="filterTests('fail')">‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô</button>
    <button class="filter-btn" onclick="filterTests('skip')">‚è≠ ‡∏Ç‡πâ‡∏≤‡∏°</button>
  </div>
  <div class="header-actions">
    <button class="btn primary" onclick="saveToLocal()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <button class="btn" onclick="loadFromLocal()">üìÇ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    <button class="btn" onclick="exportJSON()">üì§ Export JSON</button>
    <button class="btn" onclick="document.getElementById('importFile').click()">üì• Import JSON</button>
    <input type="file" id="importFile" accept=".json" style="display:none" onchange="importJSON(event)">
    <button class="btn" onclick="window.print()">üñ® Print</button>
    <button class="btn danger" onclick="resetAll()">üóë Reset</button>
  </div>
</div>

<div class="main">
  <!-- Tester Info -->
  <div class="tester-section">
    <h3>üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h3>
    <div class="tester-row">
      <input type="text" id="tester-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö">
      <input type="date" id="test-date" value="2026-02-12">
      <input type="text" id="test-env" placeholder="Environment / Browser" value="Chrome - UAT">
    </div>
  </div>

  <!-- Test Accounts -->
  <div class="accounts-bar">
    <div><strong>MEMBER:</strong> <code>tharab@sena.co.th</code> / <code>password123</code> / PIN: <code>123456</code></div>
    <div><strong>ADMIN:</strong> <code>adinuna@sena.co.th</code> / <code>password123</code> / PIN: <code>123456</code></div>
  </div>

  <!-- Sections will be generated by JS -->
  <div id="test-sections"></div>

  <!-- Summary -->
  <div class="section" style="margin-top:40px">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h2>
      <span class="section-chevron">‚ñº</span>
    </div>
    <div class="section-body" style="padding:16px">
      <table class="summary-table" id="summary-table"></table>
    </div>
  </div>

  <!-- Bug Reports -->
  <div class="section">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>üêõ Bug Reports <span id="bug-count" style="color:var(--fail)"></span></h2>
      <span class="section-chevron">‚ñº</span>
    </div>
    <div class="section-body" style="padding:16px">
      <button class="btn primary" onclick="openBugModal()">+ Report Bug</button>
      <div class="bug-list" id="bug-list"></div>
    </div>
  </div>
</div>

<!-- Bug Modal -->
<div class="modal-overlay" id="bugModal">
  <div class="modal">
    <h3>üêõ Report Bug</h3>
    <div class="modal-field">
      <label>Test Case #</label>
      <input type="text" id="bug-tc" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5.1.1">
    </div>
    <div class="modal-field">
      <label>Severity</label>
      <select id="bug-severity">
        <option value="critical">Critical</option>
        <option value="high">High</option>
        <option value="medium" selected>Medium</option>
        <option value="low">Low</option>
      </select>
    </div>
    <div class="modal-field">
      <label>User</label>
      <select id="bug-user">
        <option value="tharab">tharab (MEMBER)</option>
        <option value="adinuna">adinuna (ADMIN)</option>
      </select>
    </div>
    <div class="modal-field">
      <label>Description</label>
      <textarea id="bug-desc" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö"></textarea>
    </div>
    <div class="modal-field">
      <label>Steps to Reproduce</label>
      <textarea id="bug-steps" placeholder="1. ...&#10;2. ...&#10;3. ..."></textarea>
    </div>
    <div class="modal-field">
      <label>Expected Result</label>
      <input type="text" id="bug-expected" placeholder="‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á">
    </div>
    <div class="modal-field">
      <label>Actual Result</label>
      <input type="text" id="bug-actual" placeholder="‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á">
    </div>
    <div class="modal-actions">
      <button class="btn" onclick="closeBugModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="btn primary" onclick="saveBug()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Bug</button>
    </div>
  </div>
</div>

<script>
// ============== TEST DATA ==============
const testData = [
  {
    id: 1, title: "Authentication (‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö)",
    subs: [
      { title: "1.1 Login ‡∏î‡πâ‡∏ß‡∏¢ Email/Password", tests: [
        { id:"1.1.1", scenario:"Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (MEMBER)", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Login","‡∏Å‡∏£‡∏≠‡∏Å email: tharab@sena.co.th","‡∏Å‡∏£‡∏≠‡∏Å password","‡∏Å‡∏î Login"], expected:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Dashboard ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ \"‡∏ò‡∏£‡∏≤\" ‡∏ó‡∏µ‡πà sidebar" },
        { id:"1.1.2", scenario:"Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (ADMIN)", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Login","‡∏Å‡∏£‡∏≠‡∏Å email: adinuna@sena.co.th","‡∏Å‡∏£‡∏≠‡∏Å password","‡∏Å‡∏î Login"], expected:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Dashboard ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ \"‡∏≠‡∏î‡∏¥‡∏ô‡∏±‡∏ô‡∏ó‡πå\" ‡∏ó‡∏µ‡πà sidebar" },
      ]},
      { title: "1.2 Login ‡∏î‡πâ‡∏ß‡∏¢ PIN", tests: [
        { id:"1.2.1", scenario:"Login PIN ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Login","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å tab \"PIN\"","‡∏Å‡∏£‡∏≠‡∏Å email + PIN 6 ‡∏´‡∏•‡∏±‡∏Å","‡∏Å‡∏î Login"], expected:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Dashboard ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à" },
        { id:"1.2.2", scenario:"Login PIN ‡∏ú‡∏¥‡∏î", user:"tharab", role:"member", steps:["‡∏Å‡∏£‡∏≠‡∏Å email ‡∏ñ‡∏π‡∏Å + PIN ‡∏ú‡∏¥‡∏î","‡∏Å‡∏î Login"], expected:"‡πÅ‡∏™‡∏î‡∏á error \"Invalid PIN\"" },
      ]},
      { title: "1.3 Forgot Password", tests: [
        { id:"1.3.1", scenario:"Reset password ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Forgot Password\"","‡∏Å‡∏£‡∏≠‡∏Å email: tharab@sena.co.th","‡∏Å‡∏£‡∏≠‡∏Å password ‡πÉ‡∏´‡∏°‡πà","‡∏Å‡∏î Reset"], expected:"‡πÅ‡∏™‡∏î‡∏á success, ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ login ‡∏î‡πâ‡∏ß‡∏¢ password ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ" },
        { id:"1.3.2", scenario:"Reset password email ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö", user:"-", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Forgot Password\"","‡∏Å‡∏£‡∏≠‡∏Å email ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ","‡∏Å‡∏î Reset"], expected:"‡πÅ‡∏™‡∏î‡∏á error \"User not found\"" },
      ]},
      { title: "1.4 Forgot PIN", tests: [
        { id:"1.4.1", scenario:"Reset PIN ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Forgot PIN\"","‡∏Å‡∏£‡∏≠‡∏Å email + password ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô","‡∏ï‡∏±‡πâ‡∏á PIN ‡πÉ‡∏´‡∏°‡πà"], expected:"‡πÅ‡∏™‡∏î‡∏á success, login ‡∏î‡πâ‡∏ß‡∏¢ PIN ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ" },
        { id:"1.4.2", scenario:"Reset PIN password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Forgot PIN\"","‡∏Å‡∏£‡∏≠‡∏Å email ‡∏ñ‡∏π‡∏Å + password ‡∏ú‡∏¥‡∏î"], expected:"‡πÅ‡∏™‡∏î‡∏á error ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô" },
      ]},
      { title: "1.5 Logout", tests: [
        { id:"1.5.1", scenario:"Logout ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", user:"tharab", role:"member", steps:["‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° \"Logout\" ‡∏ó‡∏µ‡πà sidebar ‡∏•‡πà‡∏≤‡∏á"], expected:"‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Login, ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤ /dashboard ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà login" },
        { id:"1.5.2", scenario:"Logout ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Back", user:"adinuna", role:"admin", steps:["Logout","‡∏Å‡∏î Back ‡∏Ç‡∏≠‡∏á browser"], expected:"‡πÑ‡∏°‡πà‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Dashboard, redirect ‡πÑ‡∏õ Login" },
      ]},
    ]
  },
  {
    id: 2, title: "Dashboard (‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å)",
    subs: [
      { title: "2.1 ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ", tests: [
        { id:"2.1.1", scenario:"‡∏î‡∏π Dashboard (MEMBER)", user:"tharab", role:"member", steps:["Login","‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤ Dashboard"], expected:"‡πÄ‡∏´‡πá‡∏ô 4 ‡∏Å‡∏•‡πà‡∏≠‡∏á: Active Projects, My Pending Tasks, Team Members, Completion Rate" },
        { id:"2.1.2", scenario:"‡∏î‡∏π Dashboard (ADMIN)", user:"adinuna", role:"admin", steps:["Login","‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤ Dashboard"], expected:"‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏≤‡∏à‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô (ADMIN ‡πÄ‡∏´‡πá‡∏ô‡∏ó‡∏∏‡∏Å project)" },
      ]},
      { title: "2.2 ‡∏Å‡∏•‡πà‡∏≠‡∏á Dashboard ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ", tests: [
        { id:"2.2.1", scenario:"‡∏Ñ‡∏•‡∏¥‡∏Å Active Projects", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á \"Active Projects\""], expected:"‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ /projects" },
        { id:"2.2.2", scenario:"‡∏Ñ‡∏•‡∏¥‡∏Å My Pending Tasks", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á \"My Pending Tasks\""], expected:"‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ /my-tasks" },
      ]},
    ]
  },
  {
    id: 3, title: "Projects (‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£)",
    subs: [
      { title: "3.1 ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Projects", tests: [
        { id:"3.1.1", scenario:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (MEMBER)", user:"tharab", role:"member", steps:["‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Projects"], expected:"‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ projects ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô member" },
        { id:"3.1.2", scenario:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (ADMIN)", user:"adinuna", role:"admin", steps:["‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Projects"], expected:"‡πÄ‡∏´‡πá‡∏ô projects ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö" },
      ]},
      { title: "3.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡πÉ‡∏´‡∏°‡πà", tests: [
        { id:"3.2.1", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Project (ADMIN)", user:"adinuna", role:"admin", steps:["‡∏Å‡∏î \"Create Project\"","‡∏Å‡∏£‡∏≠‡∏Å: Name, Description, Status=ACTIVE","‡∏Å‡∏î Save"], expected:"Project ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" },
        { id:"3.2.2", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ DELAY", user:"adinuna", role:"admin", steps:["‡∏Å‡∏î \"Create Project\"","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Status=DELAY","‡∏Å‡∏î Save"], expected:"Project ‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏ß‡∏¢ tag ‡∏™‡∏µ‡∏™‡πâ‡∏° \"DELAY\"" },
      ]},
      { title: "3.3 ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Project", tests: [
        { id:"3.3.1", scenario:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠ Project", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å Edit ‡∏ö‡∏ô project card","‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠","‡∏Å‡∏î Save"], expected:"‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" },
        { id:"3.3.2", scenario:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô HOLD", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å Edit","‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Status ‡πÄ‡∏õ‡πá‡∏ô HOLD","‡∏Å‡∏î Save"], expected:"‡πÅ‡∏™‡∏î‡∏á tag \"HOLD\" ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á" },
      ]},
      { title: "3.4 ‡∏Å‡∏£‡∏≠‡∏á Project (Multi-Select Filter)", tests: [
        { id:"3.4.1", scenario:"‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ACTIVE", user:"tharab", role:"member", steps:["‡∏ï‡∏¥‡πä‡∏Å checkbox \"ACTIVE\""], expected:"‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ projects ‡∏ó‡∏µ‡πà status = ACTIVE" },
        { id:"3.4.2", scenario:"‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", user:"tharab", role:"member", steps:["‡∏ï‡∏¥‡πä‡∏Å \"ACTIVE\" + \"DELAY\""], expected:"‡πÅ‡∏™‡∏î‡∏á projects ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô ACTIVE ‡∏´‡∏£‡∏∑‡∏≠ DELAY" },
      ]},
      { title: "3.5 Toggle Card/List View", tests: [
        { id:"3.5.1", scenario:"‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ List view", user:"tharab", role:"member", steps:["‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° List icon (BarsOutlined)"], expected:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô List view ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ñ‡∏ß" },
        { id:"3.5.2", scenario:"‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö Card view", user:"tharab", role:"member", steps:["‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Card icon (AppstoreOutlined)"], expected:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô Card view" },
      ]},
      { title: "3.6 Sorting", tests: [
        { id:"3.6.1", scenario:"Sort ‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠ A-Z", user:"tharab", role:"member", steps:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å dropdown \"Name A-Z\""], expected:"Projects ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠ A ‚Üí Z" },
        { id:"3.6.2", scenario:"Sort ‡∏ï‡∏≤‡∏° Newest", user:"tharab", role:"member", steps:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å dropdown \"Newest\""], expected:"Projects ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î" },
      ]},
      { title: "3.7 Export Excel (Projects)", tests: [
        { id:"3.7.1", scenario:"Export ‡∏ó‡∏∏‡∏Å Projects", user:"tharab", role:"member", steps:["‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° \"Export Excel\" ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Projects"], expected:"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå .xlsx, ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡πÉ‡∏ô Excel, ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö" },
        { id:"3.7.2", scenario:"Export ‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏£‡∏≠‡∏á", user:"tharab", role:"member", steps:["‡∏Å‡∏£‡∏≠‡∏á ACTIVE","‡∏Å‡∏î Export Excel"], expected:"‡πÑ‡∏ü‡∏•‡πå .xlsx ‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ projects ‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏á" },
      ]},
      { title: "3.8 Save as PDF (Projects)", tests: [
        { id:"3.8.1", scenario:"Export PDF ‡∏ó‡∏∏‡∏Å Projects", user:"tharab", role:"member", steps:["‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° \"Save PDF\" ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Projects"], expected:"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå .pdf, ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" },
        { id:"3.8.2", scenario:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ PDF", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå PDF ‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î"], expected:"‡∏°‡∏µ header, ‡∏ï‡∏≤‡∏£‡∏≤‡∏á, ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢" },
      ]},
    ]
  },
  {
    id: 4, title: "Project Detail (‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£)",
    subs: [
      { title: "4.1 ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Project", tests: [
        { id:"4.1.1", scenario:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡∏π Project Detail", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà project card ‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ"], expected:"‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ‡∏ä‡∏∑‡πà‡∏≠, description, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ tasks" },
        { id:"4.1.2", scenario:"‡∏î‡∏π Task list ‡πÉ‡∏ô Project", user:"adinuna", role:"admin", steps:["‡πÄ‡∏Ç‡πâ‡∏≤ Project Detail"], expected:"‡πÄ‡∏´‡πá‡∏ô tasks ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô project, ‡πÅ‡∏™‡∏î‡∏á status tag ‡πÅ‡∏ï‡πà‡∏•‡∏∞ task" },
      ]},
      { title: "4.2 Export Excel (Tasks ‡πÉ‡∏ô Project)", tests: [
        { id:"4.2.1", scenario:"Export Tasks ‡πÄ‡∏õ‡πá‡∏ô Excel", user:"tharab", role:"member", steps:["‡πÄ‡∏Ç‡πâ‡∏≤ Project Detail","‡∏Å‡∏î \"Export Excel\""], expected:"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î .xlsx ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• tasks ‡∏Ñ‡∏£‡∏ö 10 columns" },
        { id:"4.2.2", scenario:"Export Tasks ‡πÄ‡∏õ‡πá‡∏ô PDF", user:"tharab", role:"member", steps:["‡πÄ‡∏Ç‡πâ‡∏≤ Project Detail","‡∏Å‡∏î \"Save PDF\""], expected:"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î .pdf ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" },
      ]},
    ]
  },
  {
    id: 5, title: "Tasks (‡∏á‡∏≤‡∏ô)",
    subs: [
      { title: "5.1 ‡∏™‡∏£‡πâ‡∏≤‡∏á Task ‡πÉ‡∏´‡∏°‡πà", tests: [
        { id:"5.1.1", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Task ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà", user:"adinuna", role:"admin", steps:["‡πÄ‡∏Ç‡πâ‡∏≤ Project Detail","‡∏Å‡∏î \"Add Task\"","‡∏Å‡∏£‡∏≠‡∏Å: Title, Description, Status=TODO, Start/Finish Date, Assignee=‡∏ò‡∏£‡∏≤"], expected:"Task ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£, ‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Start/Finish" },
        { id:"5.1.2", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Task ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ IN_PROGRESS", user:"adinuna", role:"admin", steps:["‡∏Å‡∏î \"Add Task\"","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Status=IN_PROGRESS","‡∏Å‡∏î Save"], expected:"Task ‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏ß‡∏¢ tag \"IN_PROGRESS\" ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô" },
      ]},
      { title: "5.2 ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Task", tests: [
        { id:"5.2.1", scenario:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Assignee", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å Task","‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Assignee ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô","‡∏Å‡∏î Save"], expected:"Assignee ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å" },
        { id:"5.2.2", scenario:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Status ‡πÄ‡∏õ‡πá‡∏ô DONE", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å Task ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢","‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Status ‡πÄ‡∏õ‡πá‡∏ô DONE","‡∏Å‡∏î Save"], expected:"Task ‡πÅ‡∏™‡∏î‡∏á tag \"DONE\" ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß" },
      ]},
      { title: "5.3 Task Status ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞", tests: [
        { id:"5.3.1", scenario:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô HOLD", user:"adinuna", role:"admin", steps:["‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Task","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Status=HOLD"], expected:"Tag \"HOLD\" ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" },
        { id:"5.3.2", scenario:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô CANCELLED", user:"adinuna", role:"admin", steps:["‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Task","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Status=CANCELLED"], expected:"Tag \"CANCELLED\" ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" },
      ]},
      { title: "5.4 Sub-Tasks (‡∏á‡∏≤‡∏ô‡∏¢‡πà‡∏≠‡∏¢)", tests: [
        { id:"5.4.1", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Sub-task", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task Detail","‡∏Å‡∏î \"Add Sub-task\"","‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ sub-task","‡∏Å‡∏î Save"], expected:"Sub-task ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ï‡πâ parent task" },
        { id:"5.4.2", scenario:"‡∏î‡∏π Sub-tasks list", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task ‡∏ó‡∏µ‡πà‡∏°‡∏µ sub-tasks"], expected:"‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ sub-tasks ‡∏û‡∏£‡πâ‡∏≠‡∏° checkbox/status" },
      ]},
    ]
  },
  {
    id: 6, title: "Task Detail Modal (‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô)",
    subs: [
      { title: "6.1 ‡∏î‡∏π Task Detail", tests: [
        { id:"6.1.1", scenario:"‡πÄ‡∏õ‡∏¥‡∏î Task Detail", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ Task ‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ"], expected:"Modal ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô, ‡πÄ‡∏´‡πá‡∏ô: Title, Description, Status, Dates, Assignee, Comments" },
        { id:"6.1.2", scenario:"‡∏î‡∏π Ahead/Delay indicator", user:"tharab", role:"member", steps:["‡∏î‡∏π Task ‡∏ó‡∏µ‡πà‡∏°‡∏µ Finish Date"], expected:"‡πÅ‡∏™‡∏î‡∏á Ahead (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß) ‡∏´‡∏£‡∏∑‡∏≠ Delay (‡∏™‡∏µ‡πÅ‡∏î‡∏á) ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤" },
      ]},
      { title: "6.2 Comment (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô)", tests: [
        { id:"6.2.1", scenario:"‡πÄ‡∏û‡∏¥‡πà‡∏° Comment", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task Detail","‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á Comment","‡∏Å‡∏î Send"], expected:"Comment ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤" },
        { id:"6.2.2", scenario:"‡∏î‡∏π Comments ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô"], expected:"‡πÄ‡∏´‡πá‡∏ô comment ‡∏ó‡∏µ‡πà tharab ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô" },
      ]},
      { title: "6.3 Image Attachment (‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û)", tests: [
        { id:"6.3.1", scenario:"‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ 1 ‡πÑ‡∏ü‡∏•‡πå", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task Detail","‡∏Ñ‡∏•‡∏¥‡∏Å Attach Image","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ JPG/PNG (< 5MB)","‡∏û‡∏¥‡∏°‡∏û‡πå comment","‡∏Å‡∏î Send"], expected:"Comment ‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÑ‡∏î‡πâ" },
        { id:"6.3.2", scenario:"‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task Detail","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ 2-3 ‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô","‡∏Å‡∏î Send"], expected:"‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ö" },
      ]},
      { title: "6.4 Daily Update", tests: [
        { id:"6.4.1", scenario:"‡πÄ‡∏û‡∏¥‡πà‡∏° Daily Update", user:"tharab", role:"member", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task Detail","‡πÄ‡∏û‡∏¥‡πà‡∏° update: progress %, notes"], expected:"Update ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà" },
        { id:"6.4.2", scenario:"‡∏î‡∏π Update history", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Task ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô"], expected:"‡πÄ‡∏´‡πá‡∏ô updates ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤" },
      ]},
    ]
  },
  {
    id: 7, title: "My Tasks (‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô)",
    subs: [
      { title: "7.1 ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Tasks ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á", tests: [
        { id:"7.1.1", scenario:"‡∏î‡∏π My Tasks (MEMBER)", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"My Tasks\" ‡∏ó‡∏µ‡πà sidebar"], expected:"‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ tasks ‡∏ó‡∏µ‡πà assign ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á" },
        { id:"7.1.2", scenario:"‡∏î‡∏π My Tasks (ADMIN)", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"My Tasks\""], expected:"‡πÄ‡∏´‡πá‡∏ô tasks ‡∏ó‡∏µ‡πà assign ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ó‡∏∏‡∏Å task)" },
      ]},
    ]
  },
  {
    id: 8, title: "Calendar (‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô)",
    subs: [
      { title: "8.1 ‡∏î‡∏π‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô", tests: [
        { id:"8.1.1", scenario:"‡∏î‡∏π Calendar view", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Calendar\" ‡∏ó‡∏µ‡πà sidebar"], expected:"‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÅ‡∏™‡∏î‡∏á tasks ‡∏ï‡∏≤‡∏° due date" },
        { id:"8.1.2", scenario:"‡∏Ñ‡∏•‡∏¥‡∏Å Task ‡∏ö‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà task ‡πÉ‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô"], expected:"‡πÄ‡∏õ‡∏¥‡∏î Task Detail ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ task ‡∏ô‡∏±‡πâ‡∏ô" },
      ]},
    ]
  },
  {
    id: 9, title: "Timeline (‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏•‡∏ô‡πå)",
    subs: [
      { title: "9.1 ‡∏î‡∏π Timeline ‡πÅ‡∏ö‡∏ö Multi-Project", tests: [
        { id:"9.1.1", scenario:"‡∏î‡∏π Timeline ‡∏´‡∏•‡∏≤‡∏¢ Projects", user:"adinuna", role:"admin", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Timeline\" ‡∏ó‡∏µ‡πà sidebar","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏≤‡∏¢ projects"], expected:"‡πÄ‡∏´‡πá‡∏ô Gantt chart ‡πÅ‡∏™‡∏î‡∏á tasks ‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ projects ‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô" },
        { id:"9.1.2", scenario:"‡∏î‡∏π Timeline (MEMBER)", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å \"Timeline\"","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å project ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô member"], expected:"‡πÄ‡∏´‡πá‡∏ô tasks ‡∏Ç‡∏≠‡∏á project ‡∏ô‡∏±‡πâ‡∏ô‡∏ö‡∏ô timeline" },
      ]},
    ]
  },
  {
    id: 10, title: "Groups (‡∏Å‡∏•‡∏∏‡πà‡∏°)",
    subs: [
      { title: "10.1 ‡∏™‡∏£‡πâ‡∏≤‡∏á Group", tests: [
        { id:"10.1.1", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Group ‡πÉ‡∏´‡∏°‡πà", user:"adinuna", role:"admin", steps:["‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Groups","‡∏Å‡∏î \"Create Group\"","‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ + description","‡∏Å‡∏î Save"], expected:"Group ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" },
        { id:"10.1.2", scenario:"‡∏™‡∏£‡πâ‡∏≤‡∏á Group (MEMBER)", user:"tharab", role:"member", steps:["‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Groups","‡∏Å‡∏î \"Create Group\"","‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•","‡∏Å‡∏î Save"], expected:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö RBAC)" },
      ]},
      { title: "10.2 ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Members ‡πÉ‡∏ô Group", tests: [
        { id:"10.2.1", scenario:"‡πÄ‡∏û‡∏¥‡πà‡∏° Member ‡πÄ‡∏Ç‡πâ‡∏≤ Group", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Group","‡∏Å‡∏î \"Add Member\"","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å user","‡∏Å‡∏î Add"], expected:"User ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ members ‡∏Ç‡∏≠‡∏á group" },
        { id:"10.2.2", scenario:"‡∏•‡∏ö Member ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Group", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Group","‡∏Å‡∏î Remove ‡∏ó‡∏µ‡πà member"], expected:"Member ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å, ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" },
      ]},
      { title: "10.3 ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Projects ‡πÉ‡∏ô Group", tests: [
        { id:"10.3.1", scenario:"‡πÄ‡∏û‡∏¥‡πà‡∏° Project ‡πÄ‡∏Ç‡πâ‡∏≤ Group", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Group","‡∏Å‡∏î \"Add Project\"","‡πÄ‡∏•‡∏∑‡∏≠‡∏Å project","‡∏Å‡∏î Add"], expected:"Project ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ projects ‡∏Ç‡∏≠‡∏á group" },
        { id:"10.3.2", scenario:"‡∏•‡∏ö Project ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Group", user:"adinuna", role:"admin", steps:["‡πÄ‡∏õ‡∏¥‡∏î Group","‡∏Å‡∏î Remove ‡∏ó‡∏µ‡πà project"], expected:"Project ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å group" },
      ]},
    ]
  },
  {
    id: 11, title: "Notifications (‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô)",
    subs: [
      { title: "11.1 ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô", tests: [
        { id:"11.1.1", scenario:"‡∏î‡∏π Notification popover", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà sidebar"], expected:"‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (due soon, overdue, assignment)" },
        { id:"11.1.2", scenario:"Mark as read", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà notification"], expected:"Notification ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß, badge count ‡∏•‡∏î‡∏•‡∏á" },
      ]},
    ]
  },
  {
    id: 12, title: "UI/UX ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
    subs: [
      { title: "12.1 Contrast & Readability", tests: [
        { id:"12.1.1", scenario:"‡∏ï‡∏£‡∏ß‡∏à text contrast", user:"tharab", role:"member", steps:["‡∏î‡∏π‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤"], expected:"‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏µ‡∏î‡∏≥‡∏ö‡∏ô‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°" },
        { id:"12.1.2", scenario:"Label \"Finish\" ‡πÅ‡∏ó‡∏ô \"Deadline\"", user:"tharab", role:"member", steps:["‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤ Task Detail, Create Task"], expected:"‡πÅ‡∏™‡∏î‡∏á \"Finish\" ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà \"Deadline\"" },
      ]},
      { title: "12.2 Responsive & Navigation", tests: [
        { id:"12.2.1", scenario:"Sidebar navigation", user:"tharab", role:"member", steps:["‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏∏‡∏Å menu: Dashboard, Projects, My Tasks, Calendar, Timeline, Groups"], expected:"‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á, highlight menu ‡∏ó‡∏µ‡πà active" },
        { id:"12.2.2", scenario:"Rate limiting", user:"tharab", role:"member", steps:["‡∏Å‡∏î refresh ‡∏£‡∏±‡∏ß‡πÜ 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ"], expected:"‡πÑ‡∏°‡πà‡πÇ‡∏î‡∏ô rate limit block, ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥" },
      ]},
    ]
  },
];

// ============== STATE ==============
let testStates = {}; // { "1.1.1": { status: "pass"|"fail"|"skip"|"pending", note: "" } }
let bugs = [];

// Init states
testData.forEach(sec => sec.subs.forEach(sub => sub.tests.forEach(t => {
  testStates[t.id] = { status: "pending", note: "" };
})));

// ============== RENDER ==============
function render() {
  const container = document.getElementById('test-sections');
  container.innerHTML = '';

  testData.forEach(section => {
    const secDiv = document.createElement('div');
    secDiv.className = 'section';
    secDiv.id = `section-${section.id}`;

    const totalTests = section.subs.reduce((a, s) => a + s.tests.length, 0);
    const passCount = section.subs.reduce((a, s) => a + s.tests.filter(t => testStates[t.id].status === 'pass').length, 0);
    const failCount = section.subs.reduce((a, s) => a + s.tests.filter(t => testStates[t.id].status === 'fail').length, 0);

    secDiv.innerHTML = `
      <div class="section-header" onclick="toggleSection(this)">
        <h2><span class="num">${section.id}</span> ${section.title}</h2>
        <div style="display:flex;align-items:center;gap:16px">
          <div class="section-stats">
            <span>${totalTests} cases</span>
            ${passCount ? `<span class="s-pass">‚úÖ ${passCount}</span>` : ''}
            ${failCount ? `<span class="s-fail">‚ùå ${failCount}</span>` : ''}
          </div>
          <span class="section-chevron">‚ñº</span>
        </div>
      </div>
      <div class="section-body"></div>
    `;

    const body = secDiv.querySelector('.section-body');

    section.subs.forEach(sub => {
      body.innerHTML += `<div class="subsection-title">${sub.title}</div>`;
      let tableHTML = `<table class="test-table">
        <thead><tr>
          <th class="col-id">#</th>
          <th class="col-scenario">Scenario</th>
          <th class="col-user">User</th>
          <th class="col-steps">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</th>
          <th class="col-expected">Expected Result</th>
          <th class="col-status">Status</th>
          <th class="col-note">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
        </tr></thead><tbody>`;

      sub.tests.forEach(t => {
        const state = testStates[t.id];
        const rowClass = state.status !== 'pending' ? `status-${state.status}` : '';
        const stepsHTML = t.steps.map(s => `<li>${s}</li>`).join('');

        tableHTML += `<tr class="${rowClass}" data-testid="${t.id}">
          <td class="col-id">${t.id}</td>
          <td class="col-scenario">${t.scenario}</td>
          <td class="col-user"><span class="user-badge ${t.role}">${t.user}</span></td>
          <td class="col-steps"><ol class="step-list">${stepsHTML}</ol></td>
          <td class="col-expected">${t.expected}</td>
          <td class="col-status">
            <div class="status-group">
              <button class="status-btn pass-btn ${state.status==='pass'?'active':''}" onclick="setStatus('${t.id}','pass')" title="‡∏ú‡πà‡∏≤‡∏ô">‚úì</button>
              <button class="status-btn fail-btn ${state.status==='fail'?'active':''}" onclick="setStatus('${t.id}','fail')" title="‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô">‚úó</button>
              <button class="status-btn skip-btn ${state.status==='skip'?'active':''}" onclick="setStatus('${t.id}','skip')" title="‡∏Ç‡πâ‡∏≤‡∏°">‚Äì</button>
            </div>
          </td>
          <td class="col-note"><textarea class="note-input" placeholder="..." onchange="setNote('${t.id}', this.value)">${state.note}</textarea></td>
        </tr>`;
      });

      tableHTML += '</tbody></table>';
      body.innerHTML += tableHTML;
    });

    container.appendChild(secDiv);
  });

  updateStats();
  renderSummary();
  renderBugs();
}

// ============== ACTIONS ==============
function setStatus(id, status) {
  if (testStates[id].status === status) {
    testStates[id].status = 'pending';
  } else {
    testStates[id].status = status;
  }
  render();
  autoSave();
}

function setNote(id, note) {
  testStates[id].note = note;
  autoSave();
}

function toggleSection(header) {
  header.parentElement.classList.toggle('collapsed');
}

function filterTests(filter) {
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');

  document.querySelectorAll('.test-table tr[data-testid]').forEach(row => {
    const id = row.dataset.testid;
    const status = testStates[id].status;
    if (filter === 'all') { row.style.display = ''; }
    else { row.style.display = status === filter ? '' : 'none'; }
  });
}

function updateStats() {
  const all = Object.values(testStates);
  const total = all.length;
  const pass = all.filter(s => s.status === 'pass').length;
  const fail = all.filter(s => s.status === 'fail').length;
  const skip = all.filter(s => s.status === 'skip').length;
  const pending = total - pass - fail - skip;

  document.getElementById('stat-total').textContent = total;
  document.getElementById('stat-pass').textContent = pass;
  document.getElementById('stat-fail').textContent = fail;
  document.getElementById('stat-skip').textContent = skip;
  document.getElementById('stat-pending').textContent = pending;

  document.getElementById('bar-pass').style.width = (pass/total*100)+'%';
  document.getElementById('bar-fail').style.width = (fail/total*100)+'%';
  document.getElementById('bar-skip').style.width = (skip/total*100)+'%';
}

function renderSummary() {
  const table = document.getElementById('summary-table');
  let html = `<thead><tr><th>Section</th><th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th><th>‚úÖ ‡∏ú‡πà‡∏≤‡∏ô</th><th>‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô</th><th>‚è≠ ‡∏Ç‡πâ‡∏≤‡∏°</th><th>‚¨ú ‡∏£‡∏≠</th></tr></thead><tbody>`;
  let totals = { total:0, pass:0, fail:0, skip:0, pending:0 };

  testData.forEach(sec => {
    const tests = sec.subs.flatMap(s => s.tests);
    const total = tests.length;
    const pass = tests.filter(t => testStates[t.id].status==='pass').length;
    const fail = tests.filter(t => testStates[t.id].status==='fail').length;
    const skip = tests.filter(t => testStates[t.id].status==='skip').length;
    const pending = total - pass - fail - skip;
    totals.total+=total; totals.pass+=pass; totals.fail+=fail; totals.skip+=skip; totals.pending+=pending;
    html += `<tr><td>${sec.id}. ${sec.title}</td><td class="num">${total}</td><td class="num" style="color:var(--pass)">${pass||'-'}</td><td class="num" style="color:var(--fail)">${fail||'-'}</td><td class="num" style="color:var(--skip)">${skip||'-'}</td><td class="num">${pending||'-'}</td></tr>`;
  });

  html += `<tr><td><strong>‡∏£‡∏ß‡∏°</strong></td><td class="num"><strong>${totals.total}</strong></td><td class="num" style="color:var(--pass)"><strong>${totals.pass}</strong></td><td class="num" style="color:var(--fail)"><strong>${totals.fail}</strong></td><td class="num" style="color:var(--skip)"><strong>${totals.skip}</strong></td><td class="num"><strong>${totals.pending}</strong></td></tr>`;
  html += '</tbody>';
  table.innerHTML = html;
}

// ============== BUG REPORTS ==============
function openBugModal() { document.getElementById('bugModal').classList.add('show'); }
function closeBugModal() { document.getElementById('bugModal').classList.remove('show'); }

function saveBug() {
  const bug = {
    id: 'BUG-' + String(bugs.length+1).padStart(3,'0'),
    tc: document.getElementById('bug-tc').value,
    severity: document.getElementById('bug-severity').value,
    user: document.getElementById('bug-user').value,
    desc: document.getElementById('bug-desc').value,
    steps: document.getElementById('bug-steps').value,
    expected: document.getElementById('bug-expected').value,
    actual: document.getElementById('bug-actual').value,
    date: new Date().toLocaleString('th-TH'),
  };
  bugs.push(bug);
  closeBugModal();
  // Reset form
  ['bug-tc','bug-desc','bug-steps','bug-expected','bug-actual'].forEach(id => document.getElementById(id).value='');
  renderBugs();
  autoSave();
}

function removeBug(idx) {
  bugs.splice(idx, 1);
  renderBugs();
  autoSave();
}

function renderBugs() {
  const list = document.getElementById('bug-list');
  document.getElementById('bug-count').textContent = bugs.length ? `(${bugs.length})` : '';
  if (!bugs.length) { list.innerHTML = '<p style="color:var(--text-dim);font-size:13px;margin-top:12px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ bug report</p>'; return; }
  list.innerHTML = bugs.map((b, i) => `
    <div class="bug-card">
      <div class="bug-header">
        <div><span class="bug-id">${b.id}</span> ‚Äî TC: ${b.tc} ‚Äî <span class="severity-tag ${b.severity}">${b.severity.toUpperCase()}</span></div>
        <button class="bug-remove" onclick="removeBug(${i})" title="‡∏•‡∏ö">‚úï</button>
      </div>
      <div style="margin-top:6px"><strong>User:</strong> ${b.user} | <strong>Date:</strong> ${b.date}</div>
      <div style="margin-top:4px"><strong>Description:</strong> ${b.desc}</div>
      ${b.steps ? `<div style="margin-top:4px;white-space:pre-wrap"><strong>Steps:</strong>\n${b.steps}</div>` : ''}
      <div style="margin-top:4px"><strong>Expected:</strong> ${b.expected}</div>
      <div style="margin-top:4px"><strong>Actual:</strong> ${b.actual}</div>
    </div>
  `).join('');
}

// ============== PERSISTENCE ==============
const STORAGE_KEY = 'taskflow_test_v1';

function autoSave() {
  const data = {
    testStates,
    bugs,
    tester: document.getElementById('tester-name')?.value || '',
    testDate: document.getElementById('test-date')?.value || '',
    testEnv: document.getElementById('test-env')?.value || '',
  };
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

function saveToLocal() {
  autoSave();
  const toast = document.createElement('div');
  toast.style.cssText = 'position:fixed;top:20px;right:20px;background:var(--pass);color:#fff;padding:10px 20px;border-radius:8px;z-index:999;font-size:14px;font-weight:600;';
  toast.textContent = '‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 2000);
}

function loadFromLocal() {
  const raw = localStorage.getItem(STORAGE_KEY);
  if (!raw) { alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ'); return; }
  const data = JSON.parse(raw);
  if (data.testStates) testStates = data.testStates;
  if (data.bugs) bugs = data.bugs;
  if (data.tester) document.getElementById('tester-name').value = data.tester;
  if (data.testDate) document.getElementById('test-date').value = data.testDate;
  if (data.testEnv) document.getElementById('test-env').value = data.testEnv;
  render();
}

function exportJSON() {
  autoSave();
  const data = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `taskflow-test-${new Date().toISOString().slice(0,10)}.json`;
  a.click();
}

function importJSON(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(ev) {
    try {
      const data = JSON.parse(ev.target.result);
      if (data.testStates) testStates = data.testStates;
      if (data.bugs) bugs = data.bugs;
      if (data.tester) document.getElementById('tester-name').value = data.tester;
      if (data.testDate) document.getElementById('test-date').value = data.testDate;
      if (data.testEnv) document.getElementById('test-env').value = data.testEnv;
      render();
      alert('Import ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
    } catch { alert('‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); }
  };
  reader.readAsText(file);
  e.target.value = '';
}

function resetAll() {
  if (!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£ Reset ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Export ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ)')) return;
  testData.forEach(sec => sec.subs.forEach(sub => sub.tests.forEach(t => {
    testStates[t.id] = { status: 'pending', note: '' };
  })));
  bugs = [];
  localStorage.removeItem(STORAGE_KEY);
  render();
}

// ============== INIT ==============
window.addEventListener('DOMContentLoaded', () => {
  render();
  // Auto-load if saved data exists
  const saved = localStorage.getItem(STORAGE_KEY);
  if (saved) loadFromLocal();
});
</script>
</body>
</html>
